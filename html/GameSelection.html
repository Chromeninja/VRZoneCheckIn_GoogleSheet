<!-- File Name: GameSelection.html -->
<!DOCTYPE html>
<html>
  <body>
    <form id="gameForm">
      <label for="gameSelect">Select Game:</label>
      <select name="game" id="gameSelect">
        <? var games = supportedGames; ?>
        <? for (var i = 0; i < games.length; i++) { ?>
          <option value="<?= games[i] ?>"><?= games[i] ?></option>
        <? } ?>
      </select>
      <br><br>
      <input type="hidden" name="sessionId" value="<?= sessionId ?>">
      <input type="submit" value="Submit">
    </form>

    <script>
      var sessionId = '<?= sessionId ?>';

      document.getElementById('gameForm').addEventListener('submit', function(event) {
        event.preventDefault();
        var selectedGame = document.getElementById('gameSelect').value;
        google.script.run.withSuccessHandler(function() {
          google.script.host.close();
        }).selectGame(selectedGame, sessionId);
      });
    </script>
  </body>
</html>
